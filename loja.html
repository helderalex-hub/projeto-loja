<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha Loja de CosmÃ©ticos</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; background-color: #fdf2f8; color: #333; }
        header { background-color: #d63384; color: white; padding: 20px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .vitrine { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; padding: 30px; max-width: 1000px; margin: 0 auto; }
        .produto-card { background: white; border-radius: 12px; padding: 20px; text-align: center; box-shadow: 0 4px 8px rgba(0,0,0,0.05); }
        .foto-fake { font-size: 60px; background: #fff0f5; border-radius: 50%; width: 100px; height: 100px; line-height: 100px; margin: 0 auto 15px; }
        .btn-comprar { background-color: #28a745; color: white; border: none; padding: 12px 20px; border-radius: 25px; font-weight: bold; cursor: pointer; width: 100%; }
        .esgotado { background-color: #6c757d; cursor: not-allowed; }
    </style>
</head>
<body>

    <header>
        <h1>âœ¨ Beleza & Cia âœ¨</h1>
        <p>Os melhores cosmÃ©ticos com entrega rÃ¡pida</p>
    </header>

    <div class="vitrine" id="vitrine">
        <p style="text-align:center;">Carregando produtos...</p>
    </div>

    <script>
        // O CÃ‰REBRO DA SUA LOJA ESTÃ AQUI:
        const API = 'https://api-loja-helder.onrender.com/produtos'; 

        async function carregarVitrine() {
            const resposta = await fetch(API);
            const produtos = await resposta.json();
            const divVitrine = document.getElementById('vitrine');
            divVitrine.innerHTML = '';

            const hoje = new Date();

            produtos.forEach(p => {
                // REGRA 1: Esconde produtos vencidos
                if (p.validade) {
                    const dataObj = new Date(p.validade);
                    if (dataObj < hoje) return; 
                }

                // REGRA 2: Verifica estoque
                const semEstoque = (p.estoque <= 0);
                const textoBotao = semEstoque ? "ESGOTADO" : "COMPRAR";

                divVitrine.innerHTML += `
                <div class="produto-card">
                    <div class="foto-fake">ðŸ’„</div>
                    <div style="font-size: 18px; font-weight: bold;">${p.nome}</div>
                    <div style="font-size: 22px; color: #d63384; font-weight: bold; margin: 10px 0;">R$ ${p.preco}</div>
                    <p style="font-size: 12px; color: #666;">Restam: ${p.estoque} unidades</p>
                    <button class="${semEstoque ? 'btn-comprar esgotado' : 'btn-comprar'}" ${semEstoque ? "disabled" : ""} onclick="alert('âœ… Adicionado ao carrinho!')">
                        ${textoBotao}
                    </button>
                </div>`;
            });
        }
        carregarVitrine();
    </script>
</body>
</html>
